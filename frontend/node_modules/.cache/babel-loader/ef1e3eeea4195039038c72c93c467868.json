{"ast":null,"code":"import { __assign, __rest, __spreadArray, __read } from 'tslib';\nimport { inertia, animate } from 'popmotion';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.mjs';\nimport { isAnimatable } from './is-animatable.mjs';\nimport { getDefaultTransition } from './default-transitions.mjs';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.mjs';\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\n/**\r\n * Decide whether a transition is defined on a given Transition.\r\n * This filters out orchestration options and returns true\r\n * if any options are left.\r\n */\n\nfunction isTransitionDefined(_a) {\n  _a.when;\n  _a.delay;\n  _a.delayChildren;\n  _a.staggerChildren;\n  _a.staggerDirection;\n  _a.repeat;\n  _a.repeatType;\n  _a.repeatDelay;\n  _a.from;\n\n  var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n\n  return !!Object.keys(transition).length;\n}\n\nvar legacyRepeatWarning = false;\n/**\r\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\r\n */\n\nfunction convertTransitionToAnimationOptions(_a) {\n  var ease = _a.ease,\n      times = _a.times,\n      yoyo = _a.yoyo,\n      flip = _a.flip,\n      loop = _a.loop,\n      transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n\n  var options = __assign({}, transition);\n\n  if (times) options[\"offset\"] = times;\n  /**\r\n   * Convert any existing durations from seconds to milliseconds\r\n   */\n\n  if (transition.duration) options[\"duration\"] = secondsToMilliseconds(transition.duration);\n  if (transition.repeatDelay) options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n  /**\r\n   * Map easing names to Popmotion's easing functions\r\n   */\n\n  if (ease) {\n    options[\"ease\"] = isEasingArray(ease) ? ease.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease);\n  }\n  /**\r\n   * Support legacy transition API\r\n   */\n\n\n  if (transition.type === \"tween\") options.type = \"keyframes\";\n  /**\r\n   * TODO: These options are officially removed from the API.\r\n   */\n\n  if (yoyo || loop || flip) {\n    warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n    legacyRepeatWarning = true;\n\n    if (yoyo) {\n      options.repeatType = \"reverse\";\n    } else if (loop) {\n      options.repeatType = \"loop\";\n    } else if (flip) {\n      options.repeatType = \"mirror\";\n    }\n\n    options.repeat = loop || yoyo || flip || transition.repeat;\n  }\n  /**\r\n   * TODO: Popmotion 9 has the ability to automatically detect whether to use\r\n   * a keyframes or spring animation, but does so by detecting velocity and other spring options.\r\n   * It'd be good to introduce a similar thing here.\r\n   */\n\n\n  if (transition.type !== \"spring\") options.type = \"keyframes\";\n  return options;\n}\n/**\r\n * Get the delay for a value by checking Transition with decreasing specificity.\r\n */\n\n\nfunction getDelayFromTransition(transition, key) {\n  var _a, _b;\n\n  var valueTransition = getValueTransition(transition, key) || {};\n  return (_b = (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : transition.delay) !== null && _b !== void 0 ? _b : 0;\n}\n\nfunction hydrateKeyframes(options) {\n  if (Array.isArray(options.to) && options.to[0] === null) {\n    options.to = __spreadArray([], __read(options.to), false);\n    options.to[0] = options.from;\n  }\n\n  return options;\n}\n\nfunction getPopmotionAnimationOptions(transition, options, key) {\n  var _a;\n\n  if (Array.isArray(options.to)) {\n    (_a = transition.duration) !== null && _a !== void 0 ? _a : transition.duration = 0.8;\n  }\n\n  hydrateKeyframes(options);\n  /**\r\n   * Get a default transition if none is determined to be defined.\r\n   */\n\n  if (!isTransitionDefined(transition)) {\n    transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\n  }\n\n  return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\r\n *\r\n */\n\n\nfunction getAnimation(key, value, target, transition, onComplete) {\n  var _a;\n\n  var valueTransition = getValueTransition(transition, key);\n  var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n  var isTargetAnimatable = isAnimatable(key, target);\n\n  if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n    /**\r\n     * If we're trying to animate from \"none\", try and get an animatable version\r\n     * of the target. This could be improved to work both ways.\r\n     */\n    origin = getAnimatableNone(key, target);\n  } else if (isZero(origin) && typeof target === \"string\") {\n    origin = getZeroUnit(target);\n  } else if (!Array.isArray(target) && isZero(target) && typeof origin === \"string\") {\n    target = getZeroUnit(origin);\n  }\n\n  var isOriginAnimatable = isAnimatable(key, origin);\n  warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \".concat(key, \" from \\\"\").concat(origin, \"\\\" to \\\"\").concat(target, \"\\\". \").concat(origin, \" is not an animatable value - to enable this animation set \").concat(origin, \" to a value animatable to \").concat(target, \" via the `style` property.\"));\n\n  function start() {\n    var options = {\n      from: origin,\n      to: target,\n      velocity: value.getVelocity(),\n      onComplete: onComplete,\n      onUpdate: function onUpdate(v) {\n        return value.set(v);\n      }\n    };\n    return valueTransition.type === \"inertia\" || valueTransition.type === \"decay\" ? inertia(__assign(__assign({}, options), valueTransition)) : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), {\n      onUpdate: function onUpdate(v) {\n        var _a;\n\n        options.onUpdate(v);\n        (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n      },\n      onComplete: function onComplete() {\n        var _a;\n\n        options.onComplete();\n        (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n      }\n    }));\n  }\n\n  function set() {\n    var _a, _b;\n\n    var finalTarget = resolveFinalValueInKeyframes(target);\n    value.set(finalTarget);\n    onComplete();\n    (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, finalTarget);\n    (_b = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _b === void 0 ? void 0 : _b.call(valueTransition);\n    return {\n      stop: function stop() {}\n    };\n  }\n\n  return !isOriginAnimatable || !isTargetAnimatable || valueTransition.type === false ? set : start;\n}\n\nfunction isZero(value) {\n  return value === 0 || typeof value === \"string\" && parseFloat(value) === 0 && value.indexOf(\" \") === -1;\n}\n\nfunction getZeroUnit(potentialUnitType) {\n  return typeof potentialUnitType === \"number\" ? 0 : getAnimatableNone(\"\", potentialUnitType);\n}\n\nfunction getValueTransition(transition, key) {\n  return transition[key] || transition[\"default\"] || transition;\n}\n/**\r\n * Start animation on a MotionValue. This function is an interface between\r\n * Framer Motion and Popmotion\r\n *\r\n * @internal\r\n */\n\n\nfunction startAnimation(key, value, target, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n\n  if (instantAnimationState.current) {\n    transition = {\n      type: false\n    };\n  }\n\n  return value.start(function (onComplete) {\n    var delayTimer;\n    var controls;\n    var animation = getAnimation(key, value, target, transition, onComplete);\n    var delay = getDelayFromTransition(transition, key);\n\n    var start = function start() {\n      return controls = animation();\n    };\n\n    if (delay) {\n      delayTimer = window.setTimeout(start, secondsToMilliseconds(delay));\n    } else {\n      start();\n    }\n\n    return function () {\n      clearTimeout(delayTimer);\n      controls === null || controls === void 0 ? void 0 : controls.stop();\n    };\n  });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };","map":{"version":3,"sources":["C:/Users/jeswa/Documents/online-clipboard/frontend/node_modules/framer-motion/dist/es/animation/utils/transitions.mjs"],"names":["__assign","__rest","__spreadArray","__read","inertia","animate","secondsToMilliseconds","isEasingArray","easingDefinitionToFunction","isAnimatable","getDefaultTransition","warning","getAnimatableNone","instantAnimationState","resolveFinalValueInKeyframes","isTransitionDefined","_a","when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","transition","Object","keys","length","legacyRepeatWarning","convertTransitionToAnimationOptions","ease","times","yoyo","flip","loop","options","duration","map","type","getDelayFromTransition","key","_b","valueTransition","getValueTransition","hydrateKeyframes","Array","isArray","to","getPopmotionAnimationOptions","getAnimation","value","target","onComplete","origin","get","isTargetAnimatable","isZero","getZeroUnit","isOriginAnimatable","concat","start","velocity","getVelocity","onUpdate","v","set","call","finalTarget","stop","parseFloat","indexOf","potentialUnitType","startAnimation","current","delayTimer","controls","animation","window","setTimeout","clearTimeout"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,MAAnB,EAA2BC,aAA3B,EAA0CC,MAA1C,QAAwD,OAAxD;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,WAAjC;AACA,SAASC,qBAAT,QAAsC,iCAAtC;AACA,SAASC,aAAT,EAAwBC,0BAAxB,QAA0D,cAA1D;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,SAASC,oBAAT,QAAqC,2BAArC;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,iBAAT,QAAkC,kDAAlC;AACA,SAASC,qBAAT,QAAsC,8CAAtC;AACA,SAASC,4BAAT,QAA6C,+BAA7C;AAEA;AACA;AACA;AACA;AACA;;AACA,SAASC,mBAAT,CAA6BC,EAA7B,EAAiC;AAC7BA,EAAAA,EAAE,CAACC,IAAH;AAASD,EAAAA,EAAE,CAACE,KAAH;AAAUF,EAAAA,EAAE,CAACG,aAAH;AAAkBH,EAAAA,EAAE,CAACI,eAAH;AAAoBJ,EAAAA,EAAE,CAACK,gBAAH;AAAqBL,EAAAA,EAAE,CAACM,MAAH;AAAWN,EAAAA,EAAE,CAACO,UAAH;AAAeP,EAAAA,EAAE,CAACQ,WAAH;AAAgBR,EAAAA,EAAE,CAACS,IAAH;;AAAS,MAAIC,UAAU,GAAGzB,MAAM,CAACe,EAAD,EAAK,CAAC,MAAD,EAAS,OAAT,EAAkB,eAAlB,EAAmC,iBAAnC,EAAsD,kBAAtD,EAA0E,QAA1E,EAAoF,YAApF,EAAkG,aAAlG,EAAiH,MAAjH,CAAL,CAAvB;;AACjI,SAAO,CAAC,CAACW,MAAM,CAACC,IAAP,CAAYF,UAAZ,EAAwBG,MAAjC;AACH;;AACD,IAAIC,mBAAmB,GAAG,KAA1B;AACA;AACA;AACA;;AACA,SAASC,mCAAT,CAA6Cf,EAA7C,EAAiD;AAC7C,MAAIgB,IAAI,GAAGhB,EAAE,CAACgB,IAAd;AAAA,MAAoBC,KAAK,GAAGjB,EAAE,CAACiB,KAA/B;AAAA,MAAsCC,IAAI,GAAGlB,EAAE,CAACkB,IAAhD;AAAA,MAAsDC,IAAI,GAAGnB,EAAE,CAACmB,IAAhE;AAAA,MAAsEC,IAAI,GAAGpB,EAAE,CAACoB,IAAhF;AAAA,MAAsFV,UAAU,GAAGzB,MAAM,CAACe,EAAD,EAAK,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,EAA0B,MAA1B,EAAkC,MAAlC,CAAL,CAAzG;;AACA,MAAIqB,OAAO,GAAGrC,QAAQ,CAAC,EAAD,EAAK0B,UAAL,CAAtB;;AACA,MAAIO,KAAJ,EACII,OAAO,CAAC,QAAD,CAAP,GAAoBJ,KAApB;AACJ;AACJ;AACA;;AACI,MAAIP,UAAU,CAACY,QAAf,EACID,OAAO,CAAC,UAAD,CAAP,GAAsB/B,qBAAqB,CAACoB,UAAU,CAACY,QAAZ,CAA3C;AACJ,MAAIZ,UAAU,CAACF,WAAf,EACIa,OAAO,CAACb,WAAR,GAAsBlB,qBAAqB,CAACoB,UAAU,CAACF,WAAZ,CAA3C;AACJ;AACJ;AACA;;AACI,MAAIQ,IAAJ,EAAU;AACNK,IAAAA,OAAO,CAAC,MAAD,CAAP,GAAkB9B,aAAa,CAACyB,IAAD,CAAb,GACZA,IAAI,CAACO,GAAL,CAAS/B,0BAAT,CADY,GAEZA,0BAA0B,CAACwB,IAAD,CAFhC;AAGH;AACD;AACJ;AACA;;;AACI,MAAIN,UAAU,CAACc,IAAX,KAAoB,OAAxB,EACIH,OAAO,CAACG,IAAR,GAAe,WAAf;AACJ;AACJ;AACA;;AACI,MAAIN,IAAI,IAAIE,IAAR,IAAgBD,IAApB,EAA0B;AACtBxB,IAAAA,OAAO,CAAC,CAACmB,mBAAF,EAAuB,iGAAvB,CAAP;AACAA,IAAAA,mBAAmB,GAAG,IAAtB;;AACA,QAAII,IAAJ,EAAU;AACNG,MAAAA,OAAO,CAACd,UAAR,GAAqB,SAArB;AACH,KAFD,MAGK,IAAIa,IAAJ,EAAU;AACXC,MAAAA,OAAO,CAACd,UAAR,GAAqB,MAArB;AACH,KAFI,MAGA,IAAIY,IAAJ,EAAU;AACXE,MAAAA,OAAO,CAACd,UAAR,GAAqB,QAArB;AACH;;AACDc,IAAAA,OAAO,CAACf,MAAR,GAAiBc,IAAI,IAAIF,IAAR,IAAgBC,IAAhB,IAAwBT,UAAU,CAACJ,MAApD;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACI,MAAII,UAAU,CAACc,IAAX,KAAoB,QAAxB,EACIH,OAAO,CAACG,IAAR,GAAe,WAAf;AACJ,SAAOH,OAAP;AACH;AACD;AACA;AACA;;;AACA,SAASI,sBAAT,CAAgCf,UAAhC,EAA4CgB,GAA5C,EAAiD;AAC7C,MAAI1B,EAAJ,EAAQ2B,EAAR;;AACA,MAAIC,eAAe,GAAGC,kBAAkB,CAACnB,UAAD,EAAagB,GAAb,CAAlB,IAAuC,EAA7D;AACA,SAAO,CAACC,EAAE,GAAG,CAAC3B,EAAE,GAAG4B,eAAe,CAAC1B,KAAtB,MAAiC,IAAjC,IAAyCF,EAAE,KAAK,KAAK,CAArD,GAAyDA,EAAzD,GAA8DU,UAAU,CAACR,KAA/E,MAA0F,IAA1F,IAAkGyB,EAAE,KAAK,KAAK,CAA9G,GAAkHA,EAAlH,GAAuH,CAA9H;AACH;;AACD,SAASG,gBAAT,CAA0BT,OAA1B,EAAmC;AAC/B,MAAIU,KAAK,CAACC,OAAN,CAAcX,OAAO,CAACY,EAAtB,KAA6BZ,OAAO,CAACY,EAAR,CAAW,CAAX,MAAkB,IAAnD,EAAyD;AACrDZ,IAAAA,OAAO,CAACY,EAAR,GAAa/C,aAAa,CAAC,EAAD,EAAKC,MAAM,CAACkC,OAAO,CAACY,EAAT,CAAX,EAAyB,KAAzB,CAA1B;AACAZ,IAAAA,OAAO,CAACY,EAAR,CAAW,CAAX,IAAgBZ,OAAO,CAACZ,IAAxB;AACH;;AACD,SAAOY,OAAP;AACH;;AACD,SAASa,4BAAT,CAAsCxB,UAAtC,EAAkDW,OAAlD,EAA2DK,GAA3D,EAAgE;AAC5D,MAAI1B,EAAJ;;AACA,MAAI+B,KAAK,CAACC,OAAN,CAAcX,OAAO,CAACY,EAAtB,CAAJ,EAA+B;AAC3B,KAACjC,EAAE,GAAGU,UAAU,CAACY,QAAjB,MAA+B,IAA/B,IAAuCtB,EAAE,KAAK,KAAK,CAAnD,GAAuDA,EAAvD,GAA6DU,UAAU,CAACY,QAAX,GAAsB,GAAnF;AACH;;AACDQ,EAAAA,gBAAgB,CAACT,OAAD,CAAhB;AACA;AACJ;AACA;;AACI,MAAI,CAACtB,mBAAmB,CAACW,UAAD,CAAxB,EAAsC;AAClCA,IAAAA,UAAU,GAAG1B,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK0B,UAAL,CAAT,EAA2BhB,oBAAoB,CAACgC,GAAD,EAAML,OAAO,CAACY,EAAd,CAA/C,CAArB;AACH;;AACD,SAAOjD,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKqC,OAAL,CAAT,EAAwBN,mCAAmC,CAACL,UAAD,CAA3D,CAAf;AACH;AACD;AACA;AACA;;;AACA,SAASyB,YAAT,CAAsBT,GAAtB,EAA2BU,KAA3B,EAAkCC,MAAlC,EAA0C3B,UAA1C,EAAsD4B,UAAtD,EAAkE;AAC9D,MAAItC,EAAJ;;AACA,MAAI4B,eAAe,GAAGC,kBAAkB,CAACnB,UAAD,EAAagB,GAAb,CAAxC;AACA,MAAIa,MAAM,GAAG,CAACvC,EAAE,GAAG4B,eAAe,CAACnB,IAAtB,MAAgC,IAAhC,IAAwCT,EAAE,KAAK,KAAK,CAApD,GAAwDA,EAAxD,GAA6DoC,KAAK,CAACI,GAAN,EAA1E;AACA,MAAIC,kBAAkB,GAAGhD,YAAY,CAACiC,GAAD,EAAMW,MAAN,CAArC;;AACA,MAAIE,MAAM,KAAK,MAAX,IAAqBE,kBAArB,IAA2C,OAAOJ,MAAP,KAAkB,QAAjE,EAA2E;AACvE;AACR;AACA;AACA;AACQE,IAAAA,MAAM,GAAG3C,iBAAiB,CAAC8B,GAAD,EAAMW,MAAN,CAA1B;AACH,GAND,MAOK,IAAIK,MAAM,CAACH,MAAD,CAAN,IAAkB,OAAOF,MAAP,KAAkB,QAAxC,EAAkD;AACnDE,IAAAA,MAAM,GAAGI,WAAW,CAACN,MAAD,CAApB;AACH,GAFI,MAGA,IAAI,CAACN,KAAK,CAACC,OAAN,CAAcK,MAAd,CAAD,IACLK,MAAM,CAACL,MAAD,CADD,IAEL,OAAOE,MAAP,KAAkB,QAFjB,EAE2B;AAC5BF,IAAAA,MAAM,GAAGM,WAAW,CAACJ,MAAD,CAApB;AACH;;AACD,MAAIK,kBAAkB,GAAGnD,YAAY,CAACiC,GAAD,EAAMa,MAAN,CAArC;AACA5C,EAAAA,OAAO,CAACiD,kBAAkB,KAAKH,kBAAxB,EAA4C,6BAA6BI,MAA7B,CAAoCnB,GAApC,EAAyC,UAAzC,EAAqDmB,MAArD,CAA4DN,MAA5D,EAAoE,UAApE,EAAgFM,MAAhF,CAAuFR,MAAvF,EAA+F,MAA/F,EAAuGQ,MAAvG,CAA8GN,MAA9G,EAAsH,6DAAtH,EAAqLM,MAArL,CAA4LN,MAA5L,EAAoM,4BAApM,EAAkOM,MAAlO,CAAyOR,MAAzO,EAAiP,4BAAjP,CAA5C,CAAP;;AACA,WAASS,KAAT,GAAiB;AACb,QAAIzB,OAAO,GAAG;AACVZ,MAAAA,IAAI,EAAE8B,MADI;AAEVN,MAAAA,EAAE,EAAEI,MAFM;AAGVU,MAAAA,QAAQ,EAAEX,KAAK,CAACY,WAAN,EAHA;AAIVV,MAAAA,UAAU,EAAEA,UAJF;AAKVW,MAAAA,QAAQ,EAAE,kBAAUC,CAAV,EAAa;AAAE,eAAOd,KAAK,CAACe,GAAN,CAAUD,CAAV,CAAP;AAAsB;AALrC,KAAd;AAOA,WAAOtB,eAAe,CAACJ,IAAhB,KAAyB,SAAzB,IACHI,eAAe,CAACJ,IAAhB,KAAyB,OADtB,GAEDpC,OAAO,CAACJ,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKqC,OAAL,CAAT,EAAwBO,eAAxB,CAAT,CAFN,GAGDvC,OAAO,CAACL,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKkD,4BAA4B,CAACN,eAAD,EAAkBP,OAAlB,EAA2BK,GAA3B,CAAjC,CAAT,EAA4E;AAAEuB,MAAAA,QAAQ,EAAE,kBAAUC,CAAV,EAAa;AAC/G,YAAIlD,EAAJ;;AACAqB,QAAAA,OAAO,CAAC4B,QAAR,CAAiBC,CAAjB;AACA,SAAClD,EAAE,GAAG4B,eAAe,CAACqB,QAAtB,MAAoC,IAApC,IAA4CjD,EAAE,KAAK,KAAK,CAAxD,GAA4D,KAAK,CAAjE,GAAqEA,EAAE,CAACoD,IAAH,CAAQxB,eAAR,EAAyBsB,CAAzB,CAArE;AACH,OAJyF;AAIvFZ,MAAAA,UAAU,EAAE,sBAAY;AACvB,YAAItC,EAAJ;;AACAqB,QAAAA,OAAO,CAACiB,UAAR;AACA,SAACtC,EAAE,GAAG4B,eAAe,CAACU,UAAtB,MAAsC,IAAtC,IAA8CtC,EAAE,KAAK,KAAK,CAA1D,GAA8D,KAAK,CAAnE,GAAuEA,EAAE,CAACoD,IAAH,CAAQxB,eAAR,CAAvE;AACH;AARyF,KAA5E,CAAT,CAHb;AAYH;;AACD,WAASuB,GAAT,GAAe;AACX,QAAInD,EAAJ,EAAQ2B,EAAR;;AACA,QAAI0B,WAAW,GAAGvD,4BAA4B,CAACuC,MAAD,CAA9C;AACAD,IAAAA,KAAK,CAACe,GAAN,CAAUE,WAAV;AACAf,IAAAA,UAAU;AACV,KAACtC,EAAE,GAAG4B,eAAe,KAAK,IAApB,IAA4BA,eAAe,KAAK,KAAK,CAArD,GAAyD,KAAK,CAA9D,GAAkEA,eAAe,CAACqB,QAAxF,MAAsG,IAAtG,IAA8GjD,EAAE,KAAK,KAAK,CAA1H,GAA8H,KAAK,CAAnI,GAAuIA,EAAE,CAACoD,IAAH,CAAQxB,eAAR,EAAyByB,WAAzB,CAAvI;AACA,KAAC1B,EAAE,GAAGC,eAAe,KAAK,IAApB,IAA4BA,eAAe,KAAK,KAAK,CAArD,GAAyD,KAAK,CAA9D,GAAkEA,eAAe,CAACU,UAAxF,MAAwG,IAAxG,IAAgHX,EAAE,KAAK,KAAK,CAA5H,GAAgI,KAAK,CAArI,GAAyIA,EAAE,CAACyB,IAAH,CAAQxB,eAAR,CAAzI;AACA,WAAO;AAAE0B,MAAAA,IAAI,EAAE,gBAAY,CAAG;AAAvB,KAAP;AACH;;AACD,SAAO,CAACV,kBAAD,IACH,CAACH,kBADE,IAEHb,eAAe,CAACJ,IAAhB,KAAyB,KAFtB,GAGD2B,GAHC,GAIDL,KAJN;AAKH;;AACD,SAASJ,MAAT,CAAgBN,KAAhB,EAAuB;AACnB,SAAQA,KAAK,KAAK,CAAV,IACH,OAAOA,KAAP,KAAiB,QAAjB,IACGmB,UAAU,CAACnB,KAAD,CAAV,KAAsB,CADzB,IAEGA,KAAK,CAACoB,OAAN,CAAc,GAAd,MAAuB,CAAC,CAHhC;AAIH;;AACD,SAASb,WAAT,CAAqBc,iBAArB,EAAwC;AACpC,SAAO,OAAOA,iBAAP,KAA6B,QAA7B,GACD,CADC,GAED7D,iBAAiB,CAAC,EAAD,EAAK6D,iBAAL,CAFvB;AAGH;;AACD,SAAS5B,kBAAT,CAA4BnB,UAA5B,EAAwCgB,GAAxC,EAA6C;AACzC,SAAOhB,UAAU,CAACgB,GAAD,CAAV,IAAmBhB,UAAU,CAAC,SAAD,CAA7B,IAA4CA,UAAnD;AACH;AACD;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASgD,cAAT,CAAwBhC,GAAxB,EAA6BU,KAA7B,EAAoCC,MAApC,EAA4C3B,UAA5C,EAAwD;AACpD,MAAIA,UAAU,KAAK,KAAK,CAAxB,EAA2B;AAAEA,IAAAA,UAAU,GAAG,EAAb;AAAkB;;AAC/C,MAAIb,qBAAqB,CAAC8D,OAA1B,EAAmC;AAC/BjD,IAAAA,UAAU,GAAG;AAAEc,MAAAA,IAAI,EAAE;AAAR,KAAb;AACH;;AACD,SAAOY,KAAK,CAACU,KAAN,CAAY,UAAUR,UAAV,EAAsB;AACrC,QAAIsB,UAAJ;AACA,QAAIC,QAAJ;AACA,QAAIC,SAAS,GAAG3B,YAAY,CAACT,GAAD,EAAMU,KAAN,EAAaC,MAAb,EAAqB3B,UAArB,EAAiC4B,UAAjC,CAA5B;AACA,QAAIpC,KAAK,GAAGuB,sBAAsB,CAACf,UAAD,EAAagB,GAAb,CAAlC;;AACA,QAAIoB,KAAK,GAAG,SAARA,KAAQ,GAAY;AAAE,aAAQe,QAAQ,GAAGC,SAAS,EAA5B;AAAkC,KAA5D;;AACA,QAAI5D,KAAJ,EAAW;AACP0D,MAAAA,UAAU,GAAGG,MAAM,CAACC,UAAP,CAAkBlB,KAAlB,EAAyBxD,qBAAqB,CAACY,KAAD,CAA9C,CAAb;AACH,KAFD,MAGK;AACD4C,MAAAA,KAAK;AACR;;AACD,WAAO,YAAY;AACfmB,MAAAA,YAAY,CAACL,UAAD,CAAZ;AACAC,MAAAA,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACP,IAAT,EAApD;AACH,KAHD;AAIH,GAhBM,CAAP;AAiBH;;AAED,SAASvC,mCAAT,EAA8CU,sBAA9C,EAAsES,4BAAtE,EAAoGL,kBAApG,EAAwHc,WAAxH,EAAqIb,gBAArI,EAAuJ/B,mBAAvJ,EAA4K2C,MAA5K,EAAoLgB,cAApL","sourcesContent":["import { __assign, __rest, __spreadArray, __read } from 'tslib';\r\nimport { inertia, animate } from 'popmotion';\r\nimport { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\r\nimport { isEasingArray, easingDefinitionToFunction } from './easing.mjs';\r\nimport { isAnimatable } from './is-animatable.mjs';\r\nimport { getDefaultTransition } from './default-transitions.mjs';\r\nimport { warning } from 'hey-listen';\r\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.mjs';\r\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\r\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\r\n\r\n/**\r\n * Decide whether a transition is defined on a given Transition.\r\n * This filters out orchestration options and returns true\r\n * if any options are left.\r\n */\r\nfunction isTransitionDefined(_a) {\r\n    _a.when; _a.delay; _a.delayChildren; _a.staggerChildren; _a.staggerDirection; _a.repeat; _a.repeatType; _a.repeatDelay; _a.from; var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\r\n    return !!Object.keys(transition).length;\r\n}\r\nvar legacyRepeatWarning = false;\r\n/**\r\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\r\n */\r\nfunction convertTransitionToAnimationOptions(_a) {\r\n    var ease = _a.ease, times = _a.times, yoyo = _a.yoyo, flip = _a.flip, loop = _a.loop, transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\r\n    var options = __assign({}, transition);\r\n    if (times)\r\n        options[\"offset\"] = times;\r\n    /**\r\n     * Convert any existing durations from seconds to milliseconds\r\n     */\r\n    if (transition.duration)\r\n        options[\"duration\"] = secondsToMilliseconds(transition.duration);\r\n    if (transition.repeatDelay)\r\n        options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\r\n    /**\r\n     * Map easing names to Popmotion's easing functions\r\n     */\r\n    if (ease) {\r\n        options[\"ease\"] = isEasingArray(ease)\r\n            ? ease.map(easingDefinitionToFunction)\r\n            : easingDefinitionToFunction(ease);\r\n    }\r\n    /**\r\n     * Support legacy transition API\r\n     */\r\n    if (transition.type === \"tween\")\r\n        options.type = \"keyframes\";\r\n    /**\r\n     * TODO: These options are officially removed from the API.\r\n     */\r\n    if (yoyo || loop || flip) {\r\n        warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\r\n        legacyRepeatWarning = true;\r\n        if (yoyo) {\r\n            options.repeatType = \"reverse\";\r\n        }\r\n        else if (loop) {\r\n            options.repeatType = \"loop\";\r\n        }\r\n        else if (flip) {\r\n            options.repeatType = \"mirror\";\r\n        }\r\n        options.repeat = loop || yoyo || flip || transition.repeat;\r\n    }\r\n    /**\r\n     * TODO: Popmotion 9 has the ability to automatically detect whether to use\r\n     * a keyframes or spring animation, but does so by detecting velocity and other spring options.\r\n     * It'd be good to introduce a similar thing here.\r\n     */\r\n    if (transition.type !== \"spring\")\r\n        options.type = \"keyframes\";\r\n    return options;\r\n}\r\n/**\r\n * Get the delay for a value by checking Transition with decreasing specificity.\r\n */\r\nfunction getDelayFromTransition(transition, key) {\r\n    var _a, _b;\r\n    var valueTransition = getValueTransition(transition, key) || {};\r\n    return (_b = (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : transition.delay) !== null && _b !== void 0 ? _b : 0;\r\n}\r\nfunction hydrateKeyframes(options) {\r\n    if (Array.isArray(options.to) && options.to[0] === null) {\r\n        options.to = __spreadArray([], __read(options.to), false);\r\n        options.to[0] = options.from;\r\n    }\r\n    return options;\r\n}\r\nfunction getPopmotionAnimationOptions(transition, options, key) {\r\n    var _a;\r\n    if (Array.isArray(options.to)) {\r\n        (_a = transition.duration) !== null && _a !== void 0 ? _a : (transition.duration = 0.8);\r\n    }\r\n    hydrateKeyframes(options);\r\n    /**\r\n     * Get a default transition if none is determined to be defined.\r\n     */\r\n    if (!isTransitionDefined(transition)) {\r\n        transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\r\n    }\r\n    return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\r\n}\r\n/**\r\n *\r\n */\r\nfunction getAnimation(key, value, target, transition, onComplete) {\r\n    var _a;\r\n    var valueTransition = getValueTransition(transition, key);\r\n    var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\r\n    var isTargetAnimatable = isAnimatable(key, target);\r\n    if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\r\n        /**\r\n         * If we're trying to animate from \"none\", try and get an animatable version\r\n         * of the target. This could be improved to work both ways.\r\n         */\r\n        origin = getAnimatableNone(key, target);\r\n    }\r\n    else if (isZero(origin) && typeof target === \"string\") {\r\n        origin = getZeroUnit(target);\r\n    }\r\n    else if (!Array.isArray(target) &&\r\n        isZero(target) &&\r\n        typeof origin === \"string\") {\r\n        target = getZeroUnit(origin);\r\n    }\r\n    var isOriginAnimatable = isAnimatable(key, origin);\r\n    warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \".concat(key, \" from \\\"\").concat(origin, \"\\\" to \\\"\").concat(target, \"\\\". \").concat(origin, \" is not an animatable value - to enable this animation set \").concat(origin, \" to a value animatable to \").concat(target, \" via the `style` property.\"));\r\n    function start() {\r\n        var options = {\r\n            from: origin,\r\n            to: target,\r\n            velocity: value.getVelocity(),\r\n            onComplete: onComplete,\r\n            onUpdate: function (v) { return value.set(v); },\r\n        };\r\n        return valueTransition.type === \"inertia\" ||\r\n            valueTransition.type === \"decay\"\r\n            ? inertia(__assign(__assign({}, options), valueTransition))\r\n            : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), { onUpdate: function (v) {\r\n                    var _a;\r\n                    options.onUpdate(v);\r\n                    (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\r\n                }, onComplete: function () {\r\n                    var _a;\r\n                    options.onComplete();\r\n                    (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\r\n                } }));\r\n    }\r\n    function set() {\r\n        var _a, _b;\r\n        var finalTarget = resolveFinalValueInKeyframes(target);\r\n        value.set(finalTarget);\r\n        onComplete();\r\n        (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, finalTarget);\r\n        (_b = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _b === void 0 ? void 0 : _b.call(valueTransition);\r\n        return { stop: function () { } };\r\n    }\r\n    return !isOriginAnimatable ||\r\n        !isTargetAnimatable ||\r\n        valueTransition.type === false\r\n        ? set\r\n        : start;\r\n}\r\nfunction isZero(value) {\r\n    return (value === 0 ||\r\n        (typeof value === \"string\" &&\r\n            parseFloat(value) === 0 &&\r\n            value.indexOf(\" \") === -1));\r\n}\r\nfunction getZeroUnit(potentialUnitType) {\r\n    return typeof potentialUnitType === \"number\"\r\n        ? 0\r\n        : getAnimatableNone(\"\", potentialUnitType);\r\n}\r\nfunction getValueTransition(transition, key) {\r\n    return transition[key] || transition[\"default\"] || transition;\r\n}\r\n/**\r\n * Start animation on a MotionValue. This function is an interface between\r\n * Framer Motion and Popmotion\r\n *\r\n * @internal\r\n */\r\nfunction startAnimation(key, value, target, transition) {\r\n    if (transition === void 0) { transition = {}; }\r\n    if (instantAnimationState.current) {\r\n        transition = { type: false };\r\n    }\r\n    return value.start(function (onComplete) {\r\n        var delayTimer;\r\n        var controls;\r\n        var animation = getAnimation(key, value, target, transition, onComplete);\r\n        var delay = getDelayFromTransition(transition, key);\r\n        var start = function () { return (controls = animation()); };\r\n        if (delay) {\r\n            delayTimer = window.setTimeout(start, secondsToMilliseconds(delay));\r\n        }\r\n        else {\r\n            start();\r\n        }\r\n        return function () {\r\n            clearTimeout(delayTimer);\r\n            controls === null || controls === void 0 ? void 0 : controls.stop();\r\n        };\r\n    });\r\n}\r\n\r\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };\r\n"]},"metadata":{},"sourceType":"module"}